# Автоматизированные тесты для 3snet

Проект содержит автоматизированные тесты для веб-страницы [https://dev.3snet.info/eventswidget/](https://dev.3snet.info/eventswidget/) с использованием Playwright и Python.


## Архитектура

Проект использует паттерн Page Object Model (POM) для улучшения поддерживаемости и читаемости тестов.

## Что тестируется

Тесты охватывают следующие аспекты функциональности страницы:

1. **Базовая загрузка страницы**
   - Проверка успешной загрузки страницы
   - Проверка наличия основных элементов интерфейса

2. **Виджет событий**
   - Проверка отображения виджета событий
   - Проверка наличия списка событий
   - Проверка структуры карточек событий (название, дата, описание)

3. **Интерактивность**
   - Проверка кликабельности элементов
   - Проверка навигации по событиям
   - Проверка фильтрации/сортировки (если доступна)

4. **Адаптивность**
   - Проверка отображения на различных разрешениях экрана

5. **Кроссбраузерная совместимость**
   - Тестирование в Chromium, Firefox
   - Проверка одинакового поведения во всех браузерах

## Требования

- Python 3.12+
- pip (менеджер пакетов Python)

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone https://github.com/inspectorrrrr/probable-octo-pancake
cd probable-octo-pancake
```

### 2. Создание виртуального окружения

```bash
# Создание виртуального окружения
python -m venv venv

# Активация виртуального окружения
# Linux/macOS:
source venv/bin/activate
# Windows:
venv\Scripts\activate
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
playwright install
```

### 4. Запуск тестов

```bash
# Во всех браузерах (Chromium, Firefox, WebKit)
pytest tests/ -v
```



### Дополнительные команды

Запуск с отображением браузера:
```bash
pytest tests/ -v --headed
```

Запуск с генерацией HTML-отчета:
```bash
pytest tests/ -v --html=report.html --self-contained-html
```

Запуск с генерацией Allure отчета:
```bash
pytest tests/ -v --alluredir=allure-results
allure serve allure-results
```

Запуск конкретного теста:
```bash
pytest tests/test_events_widget.py::test_page_loads -v
```

## Структура проекта

```
├── README.md                 # Документация проекта
├── BUGS.md                   # Отчет о найденных багах
├── requirements.txt          # Зависимости Python
├── pytest.ini                # Конфигурация pytest
├── pages/                    # Page Object Models
│   ├── __init__.py
│   └── events_widget_page.py
└── tests/                    # Тестовые сценарии
    ├── __init__.py
    └── test_events_widget.py
```

## Отчеты о тестировании

Проект поддерживает два типа отчетов:

### HTML отчет (pytest-html)
Простой HTML отчет с результатами тестов.

### Allure Reports
Красивые интерактивные отчеты с:
- Графиками и диаграммами
- Скриншотами при ошибках
- Подробными шагами тестов
- Группировкой по features и stories
- Уровнями критичности
- Трендами выполнения


### Выявленные проблемы

#### Баг с генерацией превью
**Описание**: После выбора тематики и страны и нажатия кнопки "Сгенерировать превью" виджет остается пустым.

**Шаги воспроизведения**:
1. Открыть страницу https://dev.3snet.info/eventswidget/
2. Выбрать любую тематику из выпадающего списка
3. Выбрать любую страну из выпадающего списка  
4. Нажать кнопку "Сгенерировать превью"
5. Наблюдать пустой виджет

**Ожидаемый результат**: Виджет должен отображать события согласно выбранным критериям.

**Фактический результат**: Виджет остается пустым.

**Статус**: Воспроизводится автоматическими тестами (тест помечен как `xfail`)

#### Баг с наложением текста
**Описание**: После нажатия кнопки "Очистить" для удаления выбранной страны происходит наложение текстовых элементов.

**Шаги воспроизведения**:
1. Выбрать страну из выпадающего списка
2. Нажать кнопку "Очистить" рядом с выбором страны
3. Наблюдать наложение текстовых элементов

**Ожидаемый результат**: Интерфейс должен корректно отображаться без наложений.

**Фактический результат**: Текстовые элементы накладываются друг на друга.

**Статус**: Автоматизированный тест создает скриншоты до/после и анализирует наложения
